---
title: Description MOFgeoDB
author: goettlic
date: '2021-12-04'
categories:
  - mofgeodb
tags:
  - data
  - database
image: img/DJI_0071.JPG
toc: yes
output:
  blogdown::html_page:
    keep_md: yes
weight: 100
bibliography: ../../MOFbib.bib
csl: ../../journal-of-biogeography.csl
---
# General Setting
The MOFgeoDB is a [SQlite](https://www.sqlite.org/) database using the spatial extension [spatialite](https://www.gaia-gis.it/fossil/libspatialite) and serves our data of vegetation (mainly trees) and study plots for ecosystem research (forest structure, experiments) over time. Additional there are some auxiliary datasets (geopackage) of infrastructure for visual reasons. [QGIS](https://qgis.org/) is used as back-end for analysis and visualization.

# Relational Structure
First overview of the relational structure gives figure \@ref(fig:erd-complete-fig)

```{r erd-complete-fig, echo=FALSE, fig.align='center', out.width='500px', fig.cap='Complete ER diagram of MOFgeoDB without creator table', fig.alt='ER diagram MOFgeoDB complete'}
knitr::include_graphics("images/erd_complete.png")
```

The database can be divided into following sections

* Species
* Plots
* Trees
* Lookup tables

When necessary the creator (referenced via `creator_id`) and the date (day) of each single measurement is noted. Creator are stored in the look-up table `lut_creator` which can be a single person or (study) group and is designed rather simple.

### Trees
Trees are measured as single individiums from a diameter of 7 cm. All trees have a unique identifier (`tree_id`) which is a combination of a lowercase letter (r=red, b=blue) and a five digit number. These identifiers are nailed to the real trees as in figure XX shown to identify them in the field.  Beside the geolocation of the center point at surface (`easting`,`northing`) and the method of this measurement (`geomeasurement_id`, see chapter geomeasurements), the species is mandatory via the species list (`species_id` from `german_sl`, [GermanSL](https://germansl.infinitenature.org/)).

Following items can be additionally stored via the corresponding tables using the referencing `tree_id` and are dependent on time:

* general parameters
  * diameter: default breast height 1.3 m, triggers calculation of perimeter or diameter on circle
  * height: method is free text
  * state: looking up state via `state_id` as shown in table ref.
  * social position
  * vitality
  * habitat
* special investigations
  * sapflow
  * dendroband
  * yearring
  * roost for bats
* dead wood
  * lying deadwood
  * decomposition

### Plots

### 

### Lookup Tables

#### lut_tree_state

state_id | state | name | description
--------------------------------------
1.1 | 1 |	alive |	first survey living tree
1.2 |	1 |	alive |	living tree from young growth
2.4 |	0 |	dead |	died unspecified
2.1 |	0 |	dead |	first survey dead tree
2.2 |	0 |	dead |	trunk fracture
2.3 |	0 |	dead |	windthrow with uprooted tree
3.1 |	0 |	felling |	felling only
3.2 |	0 |	timber extraction |	felling and timber extraction
3.3 |	1 |	limbing |	limbing
3.4 |	1 |	bark ringing |	bark ringing
2.5 |	0 |	dead |	first survey stump only
0 |	1 |	db | first db entry

# Auxiliary Data